{{!--
  file: ./templates/layouts/form-1-up.hbs
  Pattern 13: Form Block - 1-up Layout
  
  Description:
  Single-column form layout where all fields stack vertically at full width.
  Best for simple contact forms, feedback forms, or any form where fields
  benefit from maximum width. Clean, straightforward user experience.
  
  Content Structure Expected:
  {
    "id": "contact-form",
    "layout": "form-1-up",
    "elements": [
      {
        "type": "form",
        "title": "Contact Us",
        "description": "Fill out the form below and we'll get back to you within 24 hours.",
        "layout": "1-up",
        "fields": [
          {
            "name": "name",
            "label": "Your Name (required)",
            "type": "text",
            "required": true,
            "size": "full",
            "placeholder": "John Doe"
          },
          {
            "name": "email",
            "label": "Email Address (required)",
            "type": "email",
            "required": true,
            "size": "full",
            "placeholder": "john@example.com"
          },
          {
            "name": "message",
            "label": "Your Message",
            "type": "textarea",
            "required": false,
            "size": "full",
            "rows": 5,
            "placeholder": "Tell us how we can help..."
          }
        ],
        "submitButton": {
          "text": "Send Message",
          "style": "primary"
        },
        "successMessage": "Thank you! We'll be in touch soon."
      }
    ]
  }
--}}

{{#each content.elements}}
    {{#if (eq type "form")}}
        <div class="form-container">
            {{!-- Form Title --}}
            {{#if title}}
                <h2 class="form-title">{{escapeHtml title}}</h2>
            {{/if}}

            {{!-- Form Description/Instructions --}}
            {{#if description}}
                <p class="form-note">{{{markdown description}}}</p>
            {{/if}}

            {{!-- Form Element --}}
            <form action="#" method="POST" class="ips-form ips-form-1-up" data-form-id="{{../content.id}}">
                {{!-- Required Fields Notice --}}
                <p class="form-note form-required-notice">Fields marked (required) are necessary.</p>

                {{!-- Form Fields --}}
                {{#each fields}}
                    {{!-- All fields are full-width in 1-up layout --}}
                    <div class="form-group full" data-field-name="{{name}}">
                        {{!-- Field Label --}}
                        {{#if label}}
                            <label for="{{name}}">{{escapeHtml label}}</label>
                        {{/if}}

                        {{!-- Text Input --}}
                        {{#if (eq type "text")}}
                            <input 
                                id="{{name}}" 
                                name="{{name}}" 
                                type="text" 
                                {{#if placeholder}}placeholder="{{escapeHtml placeholder}}"{{/if}}
                                {{#if maxlength}}maxlength="{{maxlength}}"{{/if}}
                                {{#if required}}required{{/if}}
                            >
                        {{/if}}

                        {{!-- Email Input --}}
                        {{#if (eq type "email")}}
                            <input 
                                id="{{name}}" 
                                name="{{name}}" 
                                type="email" 
                                {{#if placeholder}}placeholder="{{escapeHtml placeholder}}"{{/if}}
                                {{#if required}}required{{/if}}
                            >
                        {{/if}}

                        {{!-- Tel Input --}}
                        {{#if (eq type "tel")}}
                            <input 
                                id="{{name}}" 
                                name="{{name}}" 
                                type="tel" 
                                {{#if placeholder}}placeholder="{{escapeHtml placeholder}}"{{/if}}
                                {{#if pattern}}pattern="{{pattern}}"{{/if}}
                                {{#if required}}required{{/if}}
                            >
                        {{/if}}

                        {{!-- Textarea --}}
                        {{#if (eq type "textarea")}}
                            <textarea 
                                id="{{name}}" 
                                name="{{name}}" 
                                {{#if rows}}rows="{{rows}}"{{else}}rows="5"{{/if}}
                                {{#if placeholder}}placeholder="{{escapeHtml placeholder}}"{{/if}}
                                {{#if maxlength}}maxlength="{{maxlength}}"{{/if}}
                                {{#if required}}required{{/if}}
                            ></textarea>
                        {{/if}}

                        {{!-- Select Dropdown --}}
                        {{#if (eq type "select")}}
                            <select 
                                id="{{name}}" 
                                name="{{name}}" 
                                {{#if required}}required{{/if}}
                            >
                                {{#each options}}
                                    <option value="{{value}}" {{#if selected}}selected{{/if}}>
                                        {{escapeHtml label}}
                                    </option>
                                {{/each}}
                            </select>
                        {{/if}}

                        {{!-- Checkbox --}}
                        {{#if (eq type "checkbox")}}
                            <div class="checkbox-wrapper">
                                <input 
                                    id="{{name}}" 
                                    name="{{name}}" 
                                    type="checkbox" 
                                    {{#if checked}}checked{{/if}}
                                    {{#if required}}required{{/if}}
                                >
                                <label for="{{name}}" class="checkbox-label">
                                    {{escapeHtml label}}
                                </label>
                            </div>
                        {{/if}}

                        {{!-- Radio Button Group --}}
                        {{#if (eq type "radio")}}
                            <div class="radio-group">
                                {{#each options}}
                                    <div class="radio-wrapper">
                                        <input 
                                            id="{{../name}}-{{@index}}" 
                                            name="{{../name}}" 
                                            type="radio" 
                                            value="{{value}}"
                                            {{#if selected}}checked{{/if}}
                                            {{#if ../required}}required{{/if}}
                                        >
                                        <label for="{{../name}}-{{@index}}" class="radio-label">
                                            {{escapeHtml label}}
                                        </label>
                                    </div>
                                {{/each}}
                            </div>
                        {{/if}}
                    </div>
                {{/each}}

                {{!-- Submit Button --}}
                {{#if submitButton}}
                    <div class="form-group full form-submit-container">
                        <button type="submit" class="ips-button form-submit-button {{submitButton.style}}">
                            {{escapeHtml submitButton.text}}
                        </button>
                    </div>
                {{/if}}

                {{!-- Success Message (Hidden by default) --}}
                {{#if successMessage}}
                    <div class="form-success-message" style="display: none;">
                        <p>{{escapeHtml successMessage}}</p>
                    </div>
                {{/if}}
            </form>
        </div>
    {{/if}}
{{/each}}
